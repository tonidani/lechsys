(function(e){function t(t){for(var n,l,o=t[0],i=t[1],c=t[2],u=0,v=[];u<o.length;u++)l=o[u],Object.prototype.hasOwnProperty.call(r,l)&&r[l]&&v.push(r[l][0]),r[l]=0;for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n]);d&&d(t);while(v.length)v.shift()();return s.push.apply(s,c||[]),a()}function a(){for(var e,t=0;t<s.length;t++){for(var a=s[t],n=!0,o=1;o<a.length;o++){var i=a[o];0!==r[i]&&(n=!1)}n&&(s.splice(t--,1),e=l(l.s=a[0]))}return e}var n={},r={app:0},s=[];function l(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,l),a.l=!0,a.exports}l.m=e,l.c=n,l.d=function(e,t,a){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(l.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)l.d(a,n,function(t){return e[t]}.bind(null,n));return a},l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="/static/src/vue/dist/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],i=o.push.bind(o);o.push=t,o=o.slice();for(var c=0;c<o.length;c++)t(o[c]);var d=i;s.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"49f8":function(e,t,a){var n={"./en.json":"edd4","./pl.json":"89b2"};function r(e){var t=s(e);return a(t)}function s(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}r.keys=function(){return Object.keys(n)},r.resolve=s,e.exports=r,r.id="49f8"},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var n=a("a026"),r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",[a("v-content",[a("Calendar"),a("TimeLine")],1)],1)},s=[],l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-row",{staticClass:"fill-height"},[a("v-col",{staticStyle:{"z-index":"0"}},[a("v-sheet",{attrs:{height:"64"}},[a("v-toolbar",{attrs:{flat:""}},[a("v-btn",{staticClass:"mr-4",attrs:{color:"primary"},on:{click:function(t){e.dialog=!0}}},[e._v(" "+e._s(e.$t("add_event"))+" ")]),a("v-btn",{staticClass:"mr-4",attrs:{outlined:"",color:"grey darken-2"},on:{click:e.setToday}},[e._v(" "+e._s(e.$t("today"))+" ")]),a("v-btn",{attrs:{fab:"",text:"",small:"",color:"grey darken-2"},on:{click:e.prev}},[a("v-icon",{attrs:{small:""}},[e._v(" mdi-chevron-left ")])],1),a("v-btn",{staticClass:"mr-4",attrs:{fab:"",text:"",small:"",color:"grey darken-2"},on:{click:e.next}},[a("v-icon",{attrs:{small:""}},[e._v(" mdi-chevron-right ")])],1),e.$refs.calendar?a("v-toolbar-title",[e._v(" "+e._s(e.$refs.calendar.title)+" ")]):e._e(),a("v-spacer"),a("v-menu",{attrs:{bottom:"",right:""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on,r=t.attrs;return[a("v-btn",e._g(e._b({attrs:{outlined:"",color:"grey darken-2"}},"v-btn",r,!1),n),[a("span",[e._v(e._s(e.$t("month")))]),a("v-icon",{attrs:{right:""}},[e._v(" mdi-menu-down ")])],1)]}}])},[a("v-list",[a("v-list-item",{on:{click:function(t){e.type="day"}}},[a("v-list-item-title",[e._v(e._s(e.$t("day")))])],1),a("v-list-item",{on:{click:function(t){e.type="week"}}},[a("v-list-item-title",[e._v(e._s(e.$t("week")))])],1),a("v-list-item",{on:{click:function(t){e.type="month"}}},[a("v-list-item-title",[e._v(e._s(e.$t("month")))])],1),a("v-list-item",{on:{click:function(t){e.type="4day"}}},[a("v-list-item-title",[e._v(e._s(e.$t("4day")))])],1)],1)],1)],1)],1),"en"==e.lang?a("v-dialog",{attrs:{"max-width":"1000px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-containter",[a("v-form",{ref:"form",staticClass:"pa-md-4 mx-lg-auto",on:{submit:function(t){return t.preventDefault(),e.addEvent.apply(null,arguments)}},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[a("v-text-field",{attrs:{type:"text",label:"Event name",rules:e.requiredRules},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),a("v-text-field",{attrs:{type:"text",label:"Details",rules:e.requiredRules},model:{value:e.details,callback:function(t){e.details=t},expression:"details"}}),a("v-text-field",{attrs:{type:"date",label:"Start",rules:e.requiredRules},model:{value:e.date_start,callback:function(t){e.date_start=t},expression:"date_start"}}),a("v-text-field",{attrs:{type:"time",label:"00:00",rules:e.requiredRules},model:{value:e.hour_start,callback:function(t){e.hour_start=t},expression:"hour_start"}}),a("v-text-field",{attrs:{type:"date",label:"End",rules:e.requiredRules},model:{value:e.date_end,callback:function(t){e.date_end=t},expression:"date_end"}}),a("v-text-field",{attrs:{type:"time",label:"00:00",rules:e.requiredRules},model:{value:e.hour_end,callback:function(t){e.hour_end=t},expression:"hour_end"}}),a("v-select",{attrs:{items:e.types,label:"Event type",required:"",rules:e.requiredRules},model:{value:e.event_type,callback:function(t){e.event_type=t},expression:"event_type"}}),a("Teams",{on:{pass:e.update}}),a("v-checkbox",{attrs:{label:"Do you want to include kinase?"},model:{value:e.kinase,callback:function(t){e.kinase=t},expression:"kinase"}}),e.selectedUsersError?a("v-alert",{staticClass:"mt-4",attrs:{border:"right","colored-border":"",type:"error",elevation:"2"}},[e._v(" You should choose players associated with the event ")]):e._e(),e.dateError?a("v-alert",{staticClass:"mt-4",attrs:{border:"right","colored-border":"",type:"error",elevation:"2"}},[e._v(" Wrong date ")]):e._e(),a("v-btn",{staticClass:"mr-4 mt-4",attrs:{type:"submit",color:"primary",disabled:!e.valid}},[e._v(" Create Event ")])],1)],1)],1)],1):e._e(),"pl"==e.lang?a("v-dialog",{attrs:{"max-width":"1000px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-containter",[a("v-form",{ref:"form",staticClass:"pa-md-4 mx-lg-auto",on:{submit:function(t){return t.preventDefault(),e.addEvent.apply(null,arguments)}},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[a("v-text-field",{attrs:{type:"text",label:"Nazwa wydarzenia",rules:e.requiredRules},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),a("v-text-field",{attrs:{type:"text",label:"Szczegóły wydarzenia",rules:e.requiredRules},model:{value:e.details,callback:function(t){e.details=t},expression:"details"}}),a("v-text-field",{attrs:{type:"date",label:"Data rozpoczęcia",rules:e.requiredRules},model:{value:e.date_start,callback:function(t){e.date_start=t},expression:"date_start"}}),a("v-text-field",{attrs:{type:"time",label:"00:00",rules:e.requiredRules},model:{value:e.hour_start,callback:function(t){e.hour_start=t},expression:"hour_start"}}),a("v-text-field",{attrs:{type:"date",label:"Data zakończenia",rules:e.requiredRules},model:{value:e.date_end,callback:function(t){e.date_end=t},expression:"date_end"}}),a("v-text-field",{attrs:{type:"time",label:"00:00",rules:e.requiredRules},model:{value:e.hour_end,callback:function(t){e.hour_end=t},expression:"hour_end"}}),a("v-select",{attrs:{items:e.types,label:"Typ wydarzenia",required:"",rules:e.requiredRules},model:{value:e.event_type,callback:function(t){e.event_type=t},expression:"event_type"}}),a("Teams",{on:{pass:e.update}}),a("v-checkbox",{attrs:{label:"Czy chcesz dołaczyć pobranie kinazy?"},model:{value:e.kinase,callback:function(t){e.kinase=t},expression:"kinase"}}),e.selectedUsersError?a("v-alert",{staticClass:"mt-4",attrs:{border:"right","colored-border":"",type:"error",elevation:"2"}},[e._v(" Wybierz zawodników, którzy mają wziąć udział w wydarzeniu ")]):e._e(),e.dateError?a("v-alert",{staticClass:"mt-4",attrs:{border:"right","colored-border":"",type:"error",elevation:"2"}},[e._v(" Nieprawodiłowa data ")]):e._e(),a("v-btn",{staticClass:"mr-4 mt-4",attrs:{type:"submit",color:"primary",disabled:!e.valid}},[e._v(" Stwórz wydarzenie ")])],1)],1)],1)],1):e._e(),a("v-sheet",{attrs:{height:"600"}},[a("v-calendar",{ref:"calendar",attrs:{color:"primary",events:e.events,"event-color":e.getEventColor,type:e.type},on:{"click:event":e.showEvent,"click:more":e.viewDay,"click:date":e.viewDay,change:e.updateRange},model:{value:e.focus,callback:function(t){e.focus=t},expression:"focus"}}),a("v-menu",{attrs:{"close-on-content-click":!1,activator:e.selectedElement,"offset-x":""},model:{value:e.selectedOpen,callback:function(t){e.selectedOpen=t},expression:"selectedOpen"}},[a("v-card",{attrs:{color:"grey lighten-4","min-width":"350px",flat:""}},[a("v-toolbar",{attrs:{color:e.selectedEvent.color,dark:""}},[a("v-btn",{attrs:{icon:""},on:{click:function(t){return e.deleteEvent()}}},[a("v-icon",[e._v("mdi-delete")])],1),a("v-toolbar-title",{domProps:{innerHTML:e._s(e.selectedEvent.name)}}),a("v-spacer")],1),a("v-card-text",[a("form",{staticStyle:{color:"black"}},[e._v(" "+e._s(e.selectedEvent.event_type)+" "+e._s(e.selectedEvent.details)+" ")])]),a("v-card-actions",[a("v-btn",{attrs:{text:"",color:"secondary"},on:{click:function(t){e.selectedOpen=!1}}},[e._v(" Close ")]),e.currentlyEditing!=e.selectedEvent.id?a("v-btn",{attrs:{text:""},on:{click:function(t){return t.preventDefault(),e.editEvent(e.selectedEvent)}}},[e._v(" Edit ")]):a("v-btn",{attrs:{text:""},on:{click:function(t){return t.preventDefault(),e.updateEvent(e.selectedEvent)}}},[e._v(" Save ")])],1)],1)],1),e.isPast?a("v-alert",{staticClass:"mt-4",attrs:{border:"right","colored-border":"",type:"warning",elevation:"2"}},[e._v(" This event has passed - surveys won't be generated ")]):e._e(),e.eventPastError?a("v-alert",{staticClass:"mt-4",attrs:{border:"right","colored-border":"",type:"error",elevation:"2"}},[e._v(" This event has passed and can't be deleted ")]):e._e()],1)],1)],1)},o=[],i=a("2909"),c=a("1da1"),d=(a("96cf"),a("d3b7"),a("b0c0"),a("99af"),a("25f0"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",[a("v-data-table",{staticClass:"blue-grey darken-2 white--text text-center",attrs:{headers:e.headers,items:e.teams,search:e.search,expanded:e.expanded,"show-expand":"","item-key":"name"},on:{"update:expanded":function(t){e.expanded=t}},scopedSlots:e._u([{key:"expanded-item",fn:function(t){var n=t.headers,r=t.item;return[a("td",{attrs:{colspan:n.length}},[a("Players",{attrs:{teamName:r.name},on:{pass:e.update,input:function(t){return e.$emit("pass2",e.parentvariable)}}})],1)]}}]),model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}})],1)}),u=[],v=(a("b64b"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",[a("v-card-title",{staticClass:"blue-grey darken-3 white--text text-center"},[e._v(" Players "),a("v-spacer"),a("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),a("v-data-table",{staticClass:"blue-grey darken-2 white--text text-center",attrs:{headers:e.headers,items:e.players,search:e.search,"item-key":"id","show-select":""},on:{input:function(t){return e.$emit("pass",e.selected)}},model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}})],1)}),p=[],f={name:"Players",props:["teamName"],data:function(){return{players:[],search:"",singleSelect:!1,selected:[],expanded:[],headers:[{text:"Name",align:"start",sortable:!1,value:"name"},{text:"Surname",value:"surname"},{text:"Role",value:"role"}]}},mounted:function(){this.getPlayers()},methods:{getPlayers:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var a,n,r,s,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch("api/users/q?team="+e.teamName);case 2:return a=t.sent,t.next=5,a.json();case 5:for(n=t.sent,r=[],s=0;s<n.length;s++)l={name:n[s].first_name,surname:n[s].last_name,role:n[s].roles[0].name,id:n[s].id},console.log(l),r.push(l);e.players=r;case 9:case"end":return t.stop()}}),t)})))()}}},m=f,h=a("2877"),b=a("6544"),y=a.n(b),g=a("b0af"),x=a("99d9"),_=a("8fea"),k=a("2fa4"),w=a("8654"),E=Object(h["a"])(m,v,p,!1,null,null,null),O=E.exports;y()(E,{VCard:g["a"],VCardTitle:x["c"],VDataTable:_["a"],VSpacer:k["a"],VTextField:w["a"]});var C={name:"Teams",components:{Players:O},data:function(){return{parentvariable:"",teams:[],teamsHeaders:[],search:"",singleSelect:!1,expanded:[],headers:[{text:"Name",align:"start",sortable:!1,value:"name"}]}},mounted:function(){this.getTeams()},methods:{getTeams:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch("api/teams");case 2:return a=t.sent,t.next=5,a.json();case 5:n=t.sent,e.teams=n,e.teamsHeaders=Object.keys(n[0]);case 8:case"end":return t.stop()}}),t)})))()},update:function(e){this.parentvariable=e,this.$emit("pass",this.parentvariable)}}},T=C,S=Object(h["a"])(T,d,u,!1,null,null,null),j=S.exports;y()(S,{VCard:g["a"],VDataTable:_["a"]});var R={components:{Teams:j},data:function(){return{today:(new Date).toISOString().substr(0,10),focus:(new Date).toISOString().substr(0,10),type:"month",typeToLabel:{month:"Month",week:"Week",day:"Day","4day":"4 Days"},types:["Training","Match league","Match Cup","Match international","Medical"],currentlyEditing:null,selectedEvent:{},selectedElement:null,selectedOpen:!1,events:[],dialog:!1,selectedUsers:"",requiredRules:[function(e){return!!e||"Required"}],valid:!0,selectedUsersError:!1,addEventSuccess:!1,dateError:!1,eventPastError:!1,kinase:null,isPast:null,event:{},lang:null}},mounted:function(){this.getLanguage(),this.getEvents()},methods:{getEvents:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch("api/events");case 2:return a=t.sent,t.next=5,a.json();case 5:n=t.sent,e.events=n;case 7:case"end":return t.stop()}}),t)})))()},addEvent:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var a,n,r,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(""!=e.selectedUsers){t.next=4;break}return e.selectedUsersError=!0,e.addEventSuccess=!1,t.abrupt("return");case 4:if(e.selectedUsersError=!1,!(e.date_start>e.date_end||e.date_end==e.date_start&&e.hour_start>e.hour_end)){t.next=9;break}return e.dateError=!0,e.addEventSuccess=!1,t.abrupt("return");case 9:for(e.dateError=!1,e.addEventSuccess=!0,e.dialog=!1,e.checkIfPast(),a=[],n=0;n<e.selectedUsers.length;n++)a.push(e.selectedUsers[n].id);return e.event={name:e.name,details:e.details,start:e.date_start+" "+e.hour_start+":00",end:e.date_end+" "+e.hour_end+":00",type:e.getTypeId(e.event_type),color:e.color,latitude:null,longitude:null,by_users:a,by_team:[],kinase:e.kinase},t.next=18,fetch("api/events",{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify(e.event)});case 18:return r=t.sent,t.next=21,r.json();case 21:s=t.sent,e.events=[].concat(Object(i["a"])(e.events),[s]);case 23:case"end":return t.stop()}}),t)})))()},deleteEvent:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=e.selectedEvent.end.toString(),a=a.substring(0,10),!(a<e.today)){t.next=6;break}e.eventPastError=!0,t.next=11;break;case 6:return t.next=8,fetch("api/events/"+e.selectedEvent.id,{method:"DELETE",headers:{"Content-type":"application/json"}});case 8:e.eventPastError=!1,e.selectedOpen=!1,e.getEvents();case 11:case"end":return t.stop()}}),t)})))()},getTypeId:function(e){return"Medical"==e?(this.color="red",5):"Training"==e?(this.color="blue",4):"Match international"==e?(this.color="green",3):"Match Cup"==e?(this.color="blue",2):"Match league"==e?(this.color="green",1):void 0},checkIfPast:function(){this.date_end<this.today?this.isPast=!0:this.isPast=!1},update:function(e){this.selectedUsers=e},closeDialog:function(){1==this.addEventSuccess&&(this.dialog=!1)},getLanguage:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch("/language");case 2:return a=t.sent,t.next=5,a.text();case 5:n=t.sent,e.$i18n.locale=n,e.$vuetify.lang.current=n,e.lang=n;case 9:case"end":return t.stop()}}),t)})))()},viewDay:function(e){var t=e.date;this.focus=t,this.type="day"},getEventColor:function(e){return e.color},setToday:function(){this.focus=this.today},prev:function(){this.$refs.calendar.prev()},next:function(){this.$refs.calendar.next()},editEvent:function(e){this.currentlyEditing=e.id},showEvent:function(e){var t=this,a=e.nativeEvent,n=e.event,r=function(){t.selectedEvent=n,t.selectedElement=a.target,setTimeout((function(){return t.selectedOpen=!0}),10)};this.selectedOpen?(this.selectedOpen=!1,setTimeout(r,10)):r(),a.stopPropagation()},updateRange:function(e){var t=e.start,a=e.end;this.start=t,this.end=a},nth:function(e){return e>3&&e<21?"th":["th","st","nd","rd","th","th","th","th","th","th"][e%10]}}},V=R,z=a("0798"),D=a("8336"),P=a("a4f6"),$=a("ac7c"),q=a("62ad"),M=a("169a"),N=a("4bd4"),U=a("132d"),L=a("8860"),I=a("da13"),A=a("5d23"),J=a("e449"),F=a("0fd9"),W=a("b974"),H=a("8dd9"),B=a("71d9"),Y=a("2a7f"),Z=Object(h["a"])(V,l,o,!1,null,null,null),G=Z.exports;y()(Z,{VAlert:z["a"],VBtn:D["a"],VCalendar:P["a"],VCard:g["a"],VCardActions:x["a"],VCardText:x["b"],VCheckbox:$["a"],VCol:q["a"],VDialog:M["a"],VForm:N["a"],VIcon:U["a"],VList:L["a"],VListItem:I["a"],VListItemTitle:A["b"],VMenu:J["a"],VRow:F["a"],VSelect:W["a"],VSheet:H["a"],VSpacer:k["a"],VTextField:w["a"],VToolbar:B["a"],VToolbarTitle:Y["a"]});var K={name:"App",components:{Calendar:G},data:function(){return{}}},Q=K,X=a("7496"),ee=a("a75b"),te=Object(h["a"])(Q,r,s,!1,null,null,null),ae=te.exports;y()(te,{VApp:X["a"],VContent:ee["a"]});var ne=a("f309"),re=a("610d"),se=a("1072");n["a"].use(ne["a"]);var le=new ne["a"]({theme:{dark:!0},lang:{locales:{en:se["a"],pl:re["a"]},current:"en"}}),oe=a("3f9d"),ie=(a("159b"),a("ddb0"),a("ac1f"),a("466d"),a("a925"));function ce(){var e=a("49f8"),t={};return e.keys().forEach((function(a){var n=a.match(/([A-Za-z0-9-_]+)\./i);if(n&&n.length>1){var r=n[1];t[r]=e(a)}})),t}n["a"].use(ie["a"]);var de=new ie["a"]({locale:"en",fallbackLocale:"en",messages:ce()});n["a"].use(oe["a"]),n["a"].config.productionTip=!1,new n["a"]({vuetify:le,i18n:de,render:function(e){return e(ae)}}).$mount("#app-calendar")},"89b2":function(e){e.exports=JSON.parse('{"add_event":"Dodaj wydarzenie","today":"Dzisiaj","day":"Dzień","week":"Tydzień","month":"Miesiąc","4day":"4 dni"}')},edd4:function(e){e.exports=JSON.parse('{"add_event":"Add Event","today":"Today","day":"Day","week":"Week","month":"Month","4day":"4 days"}')}});
//# sourceMappingURL=app.js.map